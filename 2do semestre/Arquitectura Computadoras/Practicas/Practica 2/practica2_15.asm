CONT EQU 10H
COMP EQU 11H
PIC EQU 20H
ORG 40
	DIR_F10 DW RUT_F10
ORG 44
	DIR_TIMER DW RUT_TIMER
ORG 3000H
RUT_F10: PUSH AX
	MOV DL, 1
	MOV AL, 20H
	OUT PIC, AL
	POP AX
	IRET

RUT_TIMER: PUSH AX
	PUSH BX
	PUSH CX
	MOV AL, 0
	OUT CONT, AL
	DEC CANT
	MOV CX, CANT
	ADD CX, 30H
	MOV TMP, CX
	MOV BX, OFFSET TMP
	MOV AL, 1
	INT 7
	CMP CANT, 0
	JNZ FIN_RUT_TIMER
	INT 0
FIN_RUT_TIMER: MOV AL, 20H
	OUT PIC, AL
	POP CX
	POP BX
	POP AX
	IRET

ORG 1000H
	CANT DB ?
	TMP DB ?
ORG 2000H
	MOV BX, OFFSET CANT
	INT 6
	SUB CANT, 30H
	CLI
	MOV AL, 0FEH
	OUT PIC+1, AL
	MOV AL, 10
	OUT PIC+4, AL
	STI
WAIT_F10: CMP DL, 0
	JZ WAIT_F10
	CLI
	MOV AL, 0FDH
	OUT PIC+1, AL
	MOV AL, 11
	OUT PIC+5, AL
	MOV AL, 0
	OUT CONT, AL
	MOV AL, 1
	OUT COMP, AL
	STI
LOOP: JMP LOOP
	INT 0
END
